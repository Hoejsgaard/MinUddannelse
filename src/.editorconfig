# Editor configuration for Aula project
# Enforces child-centric architecture rules

root = true

# All files
[*]
charset = utf-8
indent_style = space
indent_size = 4
insert_final_newline = true
trim_trailing_whitespace = true

# C# files
[*.cs]

# Enforce naming conventions
dotnet_naming_rule.interfaces_should_be_prefixed_with_i.severity = warning
dotnet_naming_rule.interfaces_should_be_prefixed_with_i.symbols = interface
dotnet_naming_rule.interfaces_should_be_prefixed_with_i.style = prefix_interface

dotnet_naming_symbols.interface.applicable_kinds = interface
dotnet_naming_symbols.interface.applicable_accessibilities = *

dotnet_naming_style.prefix_interface.prefix = I
dotnet_naming_style.prefix_interface.capitalization = pascal_case

# Architecture Rules - Child Parameters
# These are custom analyzer rules that need Roslyn analyzers to enforce
# For now, they serve as documentation of our architectural constraints

# ARCH001: No Child parameters in service interfaces (except allowed types)
dotnet_diagnostic.ARCH001.severity = error
# Allowed exceptions:
# - IChildOperationExecutor, ChildOperationExecutor
# - IChildServiceCoordinator, ChildServiceCoordinator
# - IChildContext, IChildContextValidator
# - IChildAuditService

# ARCH002: No methods returning collections of Child
dotnet_diagnostic.ARCH002.severity = error

# ARCH003: Obsolete interfaces must not be used in new code
dotnet_diagnostic.ARCH003.severity = warning

# ARCH004: Child-aware services must inject IChildContext
dotnet_diagnostic.ARCH004.severity = error

# ARCH005: No cross-child operations except in coordinator types
dotnet_diagnostic.ARCH005.severity = error

# Code Quality Rules
dotnet_analyzer_diagnostic.category-Design.severity = warning
dotnet_analyzer_diagnostic.category-Documentation.severity = suggestion
dotnet_analyzer_diagnostic.category-Globalization.severity = suggestion
dotnet_analyzer_diagnostic.category-Interoperability.severity = warning
dotnet_analyzer_diagnostic.category-Maintainability.severity = warning
dotnet_analyzer_diagnostic.category-Naming.severity = warning
dotnet_analyzer_diagnostic.category-Performance.severity = warning
dotnet_analyzer_diagnostic.category-Reliability.severity = error
dotnet_analyzer_diagnostic.category-Security.severity = error
dotnet_analyzer_diagnostic.category-Style.severity = suggestion
dotnet_analyzer_diagnostic.category-Usage.severity = warning

# Specific warnings for obsolete usage
# During migration phase, we allow using obsolete members with a suggestion
# This will be changed to warning/error after migration is complete
dotnet_diagnostic.CS0618.severity = suggestion # Using obsolete members (migration phase)
dotnet_diagnostic.CS0619.severity = warning     # Using obsolete members that are errors

# Require using directives to be placed outside of namespace
csharp_using_directive_placement = outside_namespace

# Prefer explicit type over var when type is apparent
csharp_style_var_for_built_in_types = false:suggestion
csharp_style_var_when_type_is_apparent = false:suggestion
csharp_style_var_elsewhere = false:suggestion

# Prefer braces
csharp_prefer_braces = true:warning

# Null checking preferences
csharp_style_throw_expression = true:suggestion
csharp_style_conditional_delegate_call = true:suggestion

# Modifier preferences
csharp_prefer_static_local_function = true:suggestion
csharp_preferred_modifier_order = public,private,protected,internal,static,extern,new,virtual,abstract,sealed,override,readonly,unsafe,volatile,async:suggestion

# Expression preferences
csharp_prefer_simple_default_expression = true:suggestion
csharp_style_pattern_local_over_anonymous_function = true:suggestion
csharp_style_prefer_index_operator = true:suggestion
csharp_style_prefer_range_operator = true:suggestion

# Pattern matching preferences
csharp_style_pattern_matching_over_as_with_null_check = true:suggestion
csharp_style_pattern_matching_over_is_with_cast_check = true:suggestion
csharp_style_prefer_switch_expression = true:suggestion
csharp_style_prefer_pattern_matching = true:suggestion
csharp_style_prefer_not_pattern = true:suggestion

# Code block preferences
csharp_prefer_simple_using_statement = true:suggestion
csharp_style_prefer_method_group_conversion = true:silent
csharp_style_prefer_top_level_statements = true:silent

# Namespace preferences
csharp_style_namespace_declarations = file_scoped:suggestion

# Test files
[*Tests.cs]
# Allow longer methods in test files
dotnet_diagnostic.CA1506.severity = none

# Allow test methods to not use their parameters
dotnet_diagnostic.IDE0060.severity = none

# JSON files
[*.json]
indent_size = 2

# XML files
[*.{xml,csproj,props,targets}]
indent_size = 2

# YAML files
[*.{yml,yaml}]
indent_size = 2

# Markdown files
[*.md]
trim_trailing_whitespace = false